/*-------------------------sprite layouts + settings ----------------------------------*/

//temp link for image-relativity;
$siteLink: /redhotchilli;

//size of sprite grid
$sprite-grid-size: 128px;

// name: x y,

$iconMap: (
  //black icons
  face:     3 0,
  close:    0 1,
  tick:     1 1,
  plus:     2 1,
  menu:     3 1,
  arrow:    4 1,
  search:   5 1,
  arrow-r:  6 1,
  arrow-l:  7 1,
  question: 0 2,
  basket:   1 2,
  phone:    2 2,
  message:  3 2,
  email:    4 2,
  expand:   5 2,
  cube:     6 2,
  list:     7 2,

  //white icons
  face-w:     4 0,
  close-w:    0 3,
  tick-w:     1 3,
  plus-w:     2 3,
  menu-w:     3 3,
  arrow-w:    4 3,
  search-w:   5 3,
  cube-w:     6 3,
  list-w:     7 3,
  question-w: 0 4,
  basket-w:   1 4,
  phone-w:    2 4,
  message-w:  3 4,
  email-w:    4 4,
  expand-w:   5 4,
  arrow-r-w:  6 4,
  arrow-l-w:  7 4,

  //power
  single-phase: 0 5,
  three-phase:  1 5,
  natural-gas:  2 5,
  lpg:          3 5,
  dual-fuel:    4 5,

  //chilled
  freezer:        5 5,
  fridge:         6 5,
  fridge-freezer: 7 5,

  //banner flags
  sale:   0 6,
  sold:   1 6,
  soon:   2 6,
  new:    3 6,
  sale2:  4 6,
  sold2:  5 6,
  soon2:  6 6,
  new2:   7 6,

  //social
  facebook: 0 7,
  twitter:  1 7,
  linkedin: 2 7,

  //loader, start and end of animation. for reference only
  loader-1: 3 7,
  loader-2: 3.8 7,
);

%has-icon-before, %has-icon-after {
  position: relative;
}

@each $pseudo in (before, after) {
  %has-icon-#{$pseudo} {
    &::#{$pseudo} {
      pointer-events: none;
      content: '';
      position: absolute;
      background-image: url(#{$siteLink + '/images/icons/RHC-Icons.min.svg'});
      height: $sprite-grid-size;
      width: $sprite-grid-size;
 //     background-repeat: no-repeat;
    }
  }
}

@mixin jr-icon($pseudo,$name: parent) {
  @if $name == parent {
    &::#{$pseudo} {
      @content;
    }
  }

  @else {
    &::#{$pseudo} {
      $sprite-ref: map-get($iconMap, $name);
      $sprite-coord-x: -(nth($sprite-ref, 1) * $sprite-grid-size);
      $sprite-coord-y: -(nth($sprite-ref, 2) * $sprite-grid-size);
      background-position: $sprite-coord-x $sprite-coord-y;

      @content;
    }
  }
}

.text-icon {
  @extend %has-icon-before;
  padding-left: 2rem;
  line-height: 2rem;
  @include jr-icon(before) {
    transform: scale(0.2);
    transform-origin: top left;
    left: 0;
    top: 1px;
  }

  @include jr-size(screen) {
    @include jr-icon(before) {
      transform: scale(0.25);
    }
  }
}

.btn-icon {
  @extend %has-icon-before;
  @include jr-icon(before) {
    transform: scale(0.375);
    transform-origin: top left;
    left: 0;
    top: 0;
  }
  @include jr-size(screen) {
    @include jr-icon(before) {
      transform: scale(0.5);
    }
  }
}


%loader-icon {
  @extend %has-icon-before;
  &::before {
    height: $sprite-grid-size;// / 4;
    width: $sprite-grid-size * 1.125;// * 2;
    left: calc(50% - 72px);
    top: 5rem;
            animation: loader-animate 0.4s steps(4) alternate infinite;
    -webkit-animation: loader-animate 0.4s steps(4) alternate infinite;
  }
}

@keyframes loader-animate {
  0%    {background-position: #{-3.125 * $sprite-grid-size  -7 * $sprite-grid-size}};
  100%  {background-position: #{-3.875 * $sprite-grid-size  -7 * $sprite-grid-size}};
}
@-webkit-keyframes loader-animate {
  0%    {background-position: #{-3.125 * $sprite-grid-size  -7 * $sprite-grid-size}};
  100%  {background-position: #{-3.875 * $sprite-grid-size  -7 * $sprite-grid-size}};
}

$icons-after: (
  single-phase,
  three-phase,
  natural-gas,
  lpg,
  dual-fuel,
  freezer,
  fridge,
  fridge-freezer
);

@each $item-name in $icons-after {
  .#{$item-name} {
    @include jr-icon(after, $item-name);
  }
}

$icons-before: (
  sale,
  sold,
  soon,
  new,
  linkedin,
  twitter,
  facebook,
  phone-w,
  question,
  list,
  search,
  basket-w,
  email-w,
  arrow-r,
  arrow-l,
  menu-w,
  close-w,
  tick
);

@each $item-name in $icons-before {
  .#{$item-name} {
    @include jr-icon(before, $item-name);
  }
}

$icons-social: (
  facebook,
  twitter,
  linkedin
);

@each $item-name in $icons-social {
  .#{$item-name} {
    @include jr-icon(before, $item-name);
  }
}

//$form-icons: (
//  search,
//  phone,
//  email
//);
//
//@each $icon in $form-icons {
//  input[name=#{$icon}] {
//    & + label {
//      @include jr-icon(before, $icon)
//    }
//    &:focus + label {
//      @include jr-icon(before, #{$icon + "-w"})
//    }
//  }
//}

