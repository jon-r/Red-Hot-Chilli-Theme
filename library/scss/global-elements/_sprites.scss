/*-------------------------sprite layouts + settings ----------------------------------*/

//temp link for image-relativity;
$siteLink: /rhc_online;

//size of sprite grid
$sprite-grid-size: 128px;

//%sprite-base-before {
//  position: relative;
//  &::before {
//    pointer-events: none;
//    content: '';
//    position: absolute;
//    background-image: url(#{$siteLink + '/images/icons/RHC-Icons-Normalised.svg'});
//    background-repeat: no-repeat;
//  }
//}

//@mixin jr-icon-size($position = 'top left', $scale = 0.5) {
//
//}


//@mixin jr-icon-coords($iconRef) {
//  $sprite-scale: 64px;
//  $sprite-ref: map-get($iconMap, $iconRef);
//  $sprite-size: nth($sprite-ref, 1) * $sprite-scale;
//  $sprite-coord-x: -(nth($sprite-ref, 2) * $sprite-scale);
//  $sprite-coord-y: -(nth($sprite-ref, 3) * $sprite-scale);
//
//  background-position: $sprite-coord-x $sprite-coord-y;
//  width: $sprite-size;
//
//  @if $iconRef == "loader" {
//    height: #{ $sprite-size / 5 };
//
//  }
//  @else {
//    height: $sprite-size;
//  }
//}

//icon coords


// name: x y,

$iconMap: (
  //black icons
  face:     3 0,
  close:    0 1,
  tick:     1 1,
  plus:     2 1,
  menu:     3 1,
  arrow:    4 1,
  search:   5 1,
  arrow-r:  6 1,
  arrow-l:  7 1,
  question: 0 2,
  basket:   1 2,
  phone:    2 2,
  message:  3 2,
  email:    4 2,
  expand:   5 2,
  cube:     6 2,
  list:     7 2,

  //white icons
  face-w:     4 0,
  close-w:    7 3,
  tick-w:     1 3,
  plus-w:     2 3,
  menu-w:     3 3,
  arrow-w:    4 3,
  search-w:   5 3,
  cube-w:     6 3,
  list-w:     7 3,
  question-w: 0 4,
  basket-w:   1 4,
  phone-w:    2 4,
  message-w:  3 4,
  email-w:    4 4,
  expand-w:   5 4,
  arrow-r-w:  6 4,
  arrow-l-w:  7 4,

  //power
  single-phase: 0 5,
  three-phase:  1 5,
  natural-gas:  2 5,
  lpg:          3 5,
  dual-fuel:    4 5,

  //chilled
  freezer:        5 5,
  fridge:         6 5,
  fridge-freezer: 7 5,

  //banner flags
  sale:   0 6,
  sold:   1 6,
  soon:   2 6,
  new:    3 6,
  sale2:  4 6,
  sold2:  5 6,
  soon2:  6 6,
  new2:   7 6,

  //social
  facebook: 0 7,
  twitter:  1 7,
  linkedin: 2 7,

  //loader, start and end of animation. for reference only
  loader-1: 3 7,
  loader-2: 3.8 7,
);

%has-icon-before, %has-icon-after {
  position: relative;
}

@each $pseudo in (before, after) {
  %has-icon-#{$pseudo} {
    &::#{$pseudo} {
      pointer-events: none;
      content: '';
      position: absolute;
      background-image: url(#{$siteLink + '/images/icons/RHC-Icons.min.svg'});
      height: $sprite-grid-size;
      width: $sprite-grid-size;
 //     background-repeat: no-repeat;
    }
  }
}

@mixin jr-icon($pseudo,$name: parent) {
  @if $name == parent {
    &::#{$pseudo} {
      @content;
    }
  }

  @else {
    &::#{$pseudo} {
      $sprite-ref: map-get($iconMap, $name);
      $sprite-coord-x: -(nth($sprite-ref, 1) * $sprite-grid-size);
      $sprite-coord-y: -(nth($sprite-ref, 2) * $sprite-grid-size);
      background-position: $sprite-coord-x $sprite-coord-y;

      @content;
    }
  }
}

$icons-after: (
  single-phase,
  three-phase,
  natural-gas,
  lpg,
  dual-fuel,
  freezer,
  fridge,
  fridge-freezer
);

@each $item-name in $icons-after {
  .#{$item-name} {
    @include jr-icon(after, $item-name);
  }
}

$icons-before: (
  sale,
  sold,
  soon,
  new,
  linkedin,
  twitter,
  facebook,
  phone-w,
  question,
  list,
  basket-w,
  email-w,
  arrow-r
);

@each $item-name in $icons-before {
  .#{$item-name} {
    @include jr-icon(before, $item-name);
  }
}

%loader-icon {
  @extend %has-icon-before;
  &::before {
    height: $sprite-grid-size;// / 4;
    width: $sprite-grid-size * 1.125;// * 2;
    left: calc(50% - 48px - 1rem);
    top: 3rem;
   animation: loader-animate 0.4s steps(4) alternate infinite;
    -webkit-animation: loader-animate 0.4s steps(5) alternate infinite;
  }
}

@keyframes loader-animate {
  0%    {background-position: #{-3.125 * $sprite-grid-size  -7 * $sprite-grid-size}};
  100%  {background-position: #{-3.875 * $sprite-grid-size  -7 * $sprite-grid-size}};
}
@-webkit-keyframes loader-animate {
  0%    {background-position: #{-3 * $sprite-grid-size -7 * $sprite-grid-size}};
  100%  {background-position: #{-3.9375 * $sprite-grid-size -7 * $sprite-grid-size}};
}

//serparating core pseudo parts to keep dry css
//@mixin jr-icon($pseudo, $icon: none, $master: true) {
//
//  @if $master == true {
//    position: relative;
//    &::#{$pseudo} {
//      pointer-events: none;
//      content: '';
//      position: absolute;
//      background-image: url(#{$siteLink + '/images/icons/RHC-Icons.png'});
//      background-repeat: no-repeat;
//
//      @if $icon != "none" {
//        @include jr-icon-coords($icon);
//      }
//
//      @content;
//    }
//  }
//  @else {
//    &::#{$pseudo} {
//      @if $icon != "none" {
//        @include jr-icon-coords($icon);
//      }
//
//      @content;
//    }
//  }
//}




//$iconMap: (
//  //black
//  close: 1 0 0,
//  tick: 1 1 0,
//  plus: 1 2 0,
//  menu: 1 3 0,
//  arrow: 1 4 0,
//  search: 1 5 0,
//  question: 1 0 1,
//  basket: 1 1 1,
//  phone: 1 2 1,
//  message: 1 3 1,
//  email: 1 4 1,
//  expand: 1 5 1,
//  arrow-r: 1 6 0,
//  arrow-l: 1 7 0,
//  cube: 1 6 1,
//  list: 1 7 1,
//
//  //white
//  close-w: 1 8 0,
//  tick-w: 1 9 0,
//  plus-w: 1 10 0,
//  menu-w: 1 11 0,
//  arrow-w: 1 12 0,
//  search-w: 1 13 0,
//  question-w: 1 8 1,
//  basket-w: 1 9 1,
//  phone-w: 1 10 1,
//  message-w: 1 11 1,
//  email-w: 1 12 1,
//  expand-w: 1 13 1,
//  arrow-r-w: 1 14 0,
//  arrow-l-w: 1 15 0,
//  cube-w: 1 14 1,
//  list-w: 1 15 1,
//
//  //power
//  single-phase: 4 0 2,
//  three-phase: 4 4 2,
//  natural-gas: 4 8 2,
//  lpg: 4 12 2,
//  dual-fuel: 4 0 6,
//
//  //chilled
//  freezer: 4 4 6,
//  fridge: 4 8 6,
//  fridge-freezer: 4 12 6,
//
//  //banner flags. note to offset by x+8 y+8
//  sale: 2 0 10,
//  sold: 2 2 10,
//  soon: 2 4 10,
//  new: 2 6 10,
//
//  //social
//  facebook: 2 0 12,
//  twitter: 2 2 12,
//  linkedin: 2 4 12,
//
//  //loader. special case since animated
//  loader: 2 14 12
//);


//@mixin jr-icon-coords($iconRef) {
//  $sprite-scale: 64px;
//  $sprite-ref: map-get($iconMap, $iconRef);
//  $sprite-size: nth($sprite-ref, 1) * $sprite-scale;
//  $sprite-coord-x: -(nth($sprite-ref, 2) * $sprite-scale);
//  $sprite-coord-y: -(nth($sprite-ref, 3) * $sprite-scale);
//
//  background-position: $sprite-coord-x $sprite-coord-y;
//  width: $sprite-size;
//
//  @if $iconRef == "loader" {
//    height: #{ $sprite-size / 5 };
//
//  }
//  @else {
//    height: $sprite-size;
//  }
//}

//these are the shortlist from above, that are actually used.
//potentially trim spritesheet, though its pretty small to begin with


//
//
//.items-loader {
//  @include jr-flex(1,1);
//  @include jr-icon(before, loader, $master: true) {
//    left: calc(50% - 48px - 1rem);
//    animation: loader-animate 0.4s steps(5) alternate infinite;
//    -webkit-animation: loader-animate 0.4s steps(5) alternate infinite;
//  };
//  height:32px;
//}
