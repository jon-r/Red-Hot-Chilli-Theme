/*! Jon Richards 2015 | GPL-2.0+ | http://www.gnu.org/licenses/gpl-2.0.txt
 * INCLUDES
 * Jquery Menu Aim | https://github.com/kamens/jQuery-menu-aim
 * Get Viewport Dimensions | http://andylangton.co.uk/blog/development/get-viewport-size-width-and-height-javascript
!*/
window.addEventListener("load",function(e,t,i){"use strict";function n(){var e=window,t=document,i=t.documentElement,n=t.getElementsByTagName("body")[0],a=e.innerWidth||i.clientWidth||n.clientWidth,s=e.innerHeight||i.clientHeight||n.clientHeight;return{width:a,height:s}}function a(e,t,i){t||(t=250);var n,a;return function(){var s=i||this,l=+new Date,r=arguments;n&&l<n+t?(clearTimeout(a),a=setTimeout(function(){n=l,e.apply(s,r)},t)):(n=l,e.apply(s,r))}}function s(t){B&&e(t).addClass("active-li")}function l(t){e(t).removeClass("active-li")}function r(){B=!1,q=E.find("li").removeClass("active-li")}function o(){e("#menu-toggle").attr("checked",!1)}function c(e){var t=document.getElementById("primary-menu"),i=document.getElementById("js-sticky-left"),a=n();"in"==e?i.appendChild(t):"out"==e&&a.width>=481&&i.parentElement.insertBefore(t,i.nextElementSibling)}function d(e){e.forEach(function(e){if(0===e.data("fixed")){var t=e.height(),i=e.width();e.addClass("is-fixed").data("fixed",1).after(S).next(".js-filler").height(t).width(i)}}),t&&(o(),c("in"))}function f(e){e.forEach(function(e){1===e.data("fixed")&&e.removeClass("is-fixed").data("fixed",0).next(".js-filler").remove()}),t&&c("out")}function u(e){T.find(".go-away").removeClass("is-active").removeClass("go-away"),T.find(".is-active").addClass("go-away"),D.eq(e).removeClass("go-away").addClass("is-active"),z.removeClass("active").eq(e).addClass("active"),setTimeout(function(){P=!1},600)}function m(){var e=n();!O&&!P&&e.width>=481&&(W=W===H?0:W+1,P=!0,u(W))}function v(t){var n=e.parseJSON(t);R.html(""),e(n).each(function(e){if(e<4){var t=i.site+"products/"+this.filter+"/"+this.url+"/",n="brand"===this.filter?"<span> - Brand</span>":"<span> - Category</span>",a='<li><a href="'+t+'" >'+this.name+n+"</a></li>";R.append(a)}})}function h(e,t){var i=R.find("li > a"),n=i.length,a=Q;"down"==e&&t<n-1?(t++,a=i.eq(t),Q.val(a.text())):"up"==e&&t>0&&(t--,a=i.eq(t),Q.val(a.text())),a.focus()}function g(t){var i=e.parseJSON(t);V.removeClass("loading").find("img").attr("src",i)}function p(t){var n=F.eq(t).find("img"),a=n.attr("src").replace("gallery-thumb","gallery");if(V.addClass("loading"),1==n.data("tile")){var s=a.replace("gallery","gallery-tile");V.removeClass("loading").find("img").attr("src",s)}else e.get(i.admin,{src:a,size:"tile",action:"jr_resize"},g),n.data("tile",1)}function C(e){e.addClass("is-active")}function y(e){e.addClass("is-active-small")}function w(e){j(),e.removeClass("is-active"),e.removeClass("is-active-small")}function j(){K.find("img").remove(),K.find("iframe").remove()}function k(t){K.append(e.parseJSON(t))}function x(e){var t=e.val(),i=e.attr("name"),n=e.attr("type"),a=t.match(/.+@.+\..+/),s="";ee.index(e);e.removeClass("error").removeClass("success").next("span").empty(),"email"!=n||a||(s="Please enter a valid email address",e.addClass("error")),t.length<1&&(s="Your "+i+" is required"),s.length>0?(e.addClass("error").next("span").text(s),se.push(s)):e.addClass("success")}function b(t){return function(i){var n=e.parseJSON(i);if(n.success){t.parents(".modal-frame").addClass("modal-finished");var a=document.createElement("span");a.textContent=n.output,a.className="form-output success",t.empty().append(a)}else t.find(".response").removeClass("loading").addClass("error").html(n.output)}}var E=e("#js-main-list"),q=E.find("li"),B=!1;E.mouseenter(function(){var e=n();e.width>=1030?(B=!0,E.menuAim({activate:s,deactivate:l,exitMenu:r})):B=!1}),q.click(function(){e(this).toggleClass("active-li")}),E.mouseleave(function(){window.setTimeout(o,300)});var I=document.getElementById("js-sticky-right"),_=document.getElementById("js-sticky-left"),N=[e(_),e(I)],S='<div class="js-filler"></div>';window.onscroll=a(function(){_.parentElement.getBoundingClientRect().top<40?d(N):f(N)},100),t&&c("out");var T=e("#js-carousel-main"),D=T.find(".slide"),z=e("#js-carousel-blips > .blip"),H=D.length-1,J=8e3,O=!1,P=!1,W=0;if(T.length>0){var L=window.setInterval(m,J);T.mouseover(function(){O=!0}),T.mouseout(function(){O=!1,clearInterval(L),L=window.setInterval(m,J)}),z.mouseover(function(){O=!0}),z.mouseout(function(){O=!1,clearInterval(L),L=window.setInterval(m,J)})}z.click(function(){W===e(this).index()||P||(P=!0,W=e(this).index(),u(W))});var M=3,A=e("#js-form-complete").find(".form-search"),Q=A.find(".search-in"),R=A.find(".search-out");Q.keyup(function(){var t=n();if(t.width>=1030){var a=e(this).val();a.length>=M?e.get(i.admin,{keyword:a,action:"jr_autocomplete"}).done(v):R.html("")}}),Q.on("keydown",function(e){var t=R.find("li > a");40==e.keyCode&&t.length>0&&(e.preventDefault(),h("down",-1))}),R.on("keydown","li > a",function(t){var i=R.find(":focus"),n=0;40==t.keyCode&&i.length>0?(t.preventDefault(),n=e(this).parent("li").index(),h("down",n)):38==t.keyCode&&i.length>0&&(t.preventDefault(),n=e(this).parent("li").index(),h("up",n))});var V=e("#js-gallery-primary"),Y=e("#js-gallery-thumbs"),F=Y.find(".product-thumb"),G=F.length-1;e("#js-gallery-prev").click(function(){0==G&&(G=F.length),G--,p(G)}),e("#js-gallery-next").click(function(){G==F.length-1&&(G=-1),G++,p(G)}),F.click(function(){p(e(this).index())});var K=e("#js-gallery-modal"),U=e("#js-buy-modal"),X=e("#js-query-modal");e("#js-gallery-zoom").click(function(){var e=V.find("img").attr("src").replace("gallery-tile","gallery"),t=document.createElement("img");t.src=e,K.append(t),C(K)}),K.find(".modal-close").click(function(){w(K)}),e("#js-buy-btn").click(function(){y(U)}),U.find(".modal-close").click(function(){w(U)}),e("#js-query-btn").click(function(){y(X)}),X.find(".modal-close").click(function(){w(X)});var Z=Y.find(".product-video");Z.click(function(t){var n=e(this).data("video");e.get(i.admin,{src:n,action:"jr_getVid"},k),C(K)});var $=e(".js_contact_form"),ee=$.find(".req"),te=$.find(":not(.req)"),ie=$.find(".js_nextBtn"),ne=$.find(".js_backBtn"),ae=$.next(".form-progress").find(".progress-blip"),se=[];$.attr("novalidate",""),$.submit(function(t){t.preventDefault();var n=e(this),a=n.find(".response");se=[],n.find(ee).each(function(){x(e(this))}),a.removeClass("success").removeClass("error").empty(),0==se.length?(a.addClass("loading"),e.get(i.admin,{keyword:n.serialize(),action:"jr_formsubmit",url:window.location.href}).done(b(n))):a.addClass("error").html("Please fill in required items")}),ie.click(function(t){var i=e(this).closest("fieldset.subform-active"),n=i.index(),a=i.find(".response");se=[],i.find(ee).each(function(){x(e(this))}),a.removeClass("success").removeClass("error").empty(),0==se.length?(i.removeClass("subform-active").next("fieldset").addClass("subform-active"),ae.eq(n).addClass("active")):a.addClass("error").html("Please fill in required items")}),ne.click(function(t){var i=e(this).closest("fieldset.subform-active"),n=i.index();i.removeClass("subform-active").prev("fieldset").addClass("subform-active"),ae.eq(n-1).removeClass("active")}),ee.change(function(t){x(e(this))}),te.change(function(t){var i=e(this);i.val().length>0?i.addClass("success"):i.removeClass("success")});var le=e("#js-tabs-frame").find(".tab-toggle"),re=e("#js-specs-list"),oe=e("#js-specs-copy");le.click(function(){e(this).closest("section").toggleClass("active").siblings("section").removeClass("active")}),oe.click(function(){var e=re.html().replace(/(<li>)|(\s\s+)|(<img.*alt=")|("><a.*<\/a>)/g,"").replace(/<\/li>/g,"<br>"),t=document.createElement("p");t.className="item-dimensions tile-inner",t.innerHTML=e,re.after(t),re.remove(),oe.remove()})}(jQuery,isIndex,fileSrc));
