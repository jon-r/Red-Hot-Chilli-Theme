/* Jon Richards 2015 | GPL-2.0+ | http://www.gnu.org/licenses/gpl-2.0.txt
 * INCLUDES
 * Jquery Menu Aim | https://github.com/kamens/jQuery-menu-aim
 * Get Viewport Dimensions | http://andylangton.co.uk/blog/development/get-viewport-size-width-and-height-javascript
*/
!function(a){function b(b){var l=a(this),f=null,e=[],p=null,h=null,d=a.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:a.noop,exit:a.noop,activate:a.noop,deactivate:a.noop,exitMenu:a.noop},b),t=function(a){a!=f&&(f&&d.deactivate(f),d.activate(a),f=a)},u=function(a){var b=v();b?h=setTimeout(function(){u(a)},b):t(a)},v=function(){function b(a,c){return(c.y-a.y)/(c.x-a.x)}if(!f||!a(f).is(d.submenuSelector))return 0;var c=l.offset(),g={x:c.left,y:c.top-d.tolerance},
h={x:c.left+l.outerWidth(),y:g.y},r={x:c.left,y:c.top+l.outerHeight()+d.tolerance},q={x:c.left+l.outerWidth(),y:r.y},m=e[e.length-1],k=e[0];if(!m||(k||(k=m),k.x<c.left||k.x>q.x||k.y<c.top||k.y>q.y)||p&&m.x==p.x&&m.y==p.y)return 0;var n=h,c=q;"left"==d.submenuDirection?(n=r,c=g):"below"==d.submenuDirection?(n=q,c=r):"above"==d.submenuDirection&&(n=g,c=h);g=b(m,n);h=b(m,c);n=b(k,n);k=b(k,c);return n>g&&h>k?(p=m,300):(p=null,0)};l.mouseleave(function(){h&&clearTimeout(h);d.exitMenu(this)&&(f&&d.deactivate(f),
f=null)}).find(d.rowSelector).mouseenter(function(){h&&clearTimeout(h);d.enter(this);u(this)}).mouseleave(function(){d.exit(this)}).click(function(){t(this)});a(document).mousemove(function(a){e.push({x:a.pageX,y:a.pageY});3<e.length&&e.shift()})}a.fn.menuAim=function(a){return this.each(function(){b.call(this,a)}),this}}(jQuery);
function updateViewportDimensions(){var a=window,b=document,g=b.documentElement,b=b.getElementsByTagName("body")[0];return{width:a.innerWidth||g.clientWidth||b.clientWidth,height:a.innerHeight||g.clientHeight||b.clientHeight}}var $navMain_ul=$("#js-main-list"),$navMain_li=$navMain_ul.find("li"),bigScreen=!1;
$navMain_ul.mouseenter(function(){vp=updateViewportDimensions();1030<=vp.width?(bigScreen=!0,$navMain_ul.menuAim({activate:showSubMenu,deactivate:hideSubMenu,exitMenu:hideAllMenus})):bigScreen=!1});function showSubMenu(a){bigScreen&&($row=$(a),$row.addClass("active-li"))}function hideSubMenu(a){$row=$(a);$row.removeClass("active-li")}function hideAllMenus(){bigScreen=!1;$navMain_li=$navMain_ul.find("li").removeClass("active-li")}$navMain_li.click(function(){$(this).toggleClass("active-li")});
var $carousel=$("#js-carousel-main"),$slide=$carousel.find(".slide"),$tabs=$("#js-carousel-blips > .blip"),slideCount=$slide.length-1,slideTime=8E3,hoverLock=!1,timerLock=!1,tickerInt=0;
if(0<$carousel.length){var carouselTimer=window.setInterval(ticker,slideTime);$carousel.mouseover(function(){hoverLock=!0});$carousel.mouseout(function(){hoverLock=!1;clearInterval(carouselTimer);carouselTimer=window.setInterval(ticker,slideTime)});$tabs.mouseover(function(){hoverLock=!0});$tabs.mouseout(function(){hoverLock=!1;clearInterval(carouselTimer);carouselTimer=window.setInterval(ticker,slideTime)})}
function ticker(){console.log("tick");hoverLock||timerLock||(tickerInt=tickerInt==slideCount?0:tickerInt+1,timerLock=!0,slideActivate(tickerInt))}$tabs.click(function(){1==timerLock&&console.log("spam");tickerInt==$(this).index()||timerLock||(timerLock=!0,tickerInt=$(this).index(),slideActivate(tickerInt))});
function slideActivate(a){$carousel.find(".go-away").removeClass("is-active").removeClass("go-away");$carousel.find(".is-active").addClass("go-away");$slide.eq(a).removeClass("go-away").addClass("is-active");$tabs.removeClass("active").eq(a).addClass("active");setTimeout(function(){timerLock=!1},600)}var MIN_LENGTH=3,$searchForm=$("#js-form-complete").find(".form-search"),$searchIn=$searchForm.find(".search-in"),$searchOut=$searchForm.find(".search-out");
$searchIn.keyup(function(){vp=updateViewportDimensions();if(1030<=vp.width){var a=$(this).val();a.length>=MIN_LENGTH?$.get(fileSrc.admin,{keyword:a,action:"jr_autocomplete"}).done(searchToText):$searchOut.html("")}});
function searchToText(a){a=$.parseJSON(a);$searchOut.html("");$(a).each(function(a){4>a&&$searchOut.append('<li><a href="'+(fileSrc.site+"/products/"+this.filter+"/"+this.url+"/")+'" >'+this.name+("brand"==this.filter?"<span> - Brand</span>":"<span> - Category</span>")+"</a></li>")})}$searchIn.on("keydown",function(a){$results=$searchOut.find("li > a");"40"==a.keyCode&&0<$results.length&&(a.preventDefault(),searchTraverse("down",-1))});
$searchOut.on("keydown","li > a",function(a){$focussed=$searchOut.find(":focus");"40"==a.keyCode&&0<$focussed.length?(a.preventDefault(),$i=$(this).parent("li").index(),searchTraverse("down",$i)):"38"==a.keyCode&&0<$focussed.length&&(a.preventDefault(),$i=$(this).parent("li").index(),searchTraverse("up",$i))});
function searchTraverse(a,b){$results=$searchOut.find("li > a");$resultCount=$results.length;"down"==a&&b<$resultCount-1?(b++,$target=$results.eq(b),$text=$target.text(),$searchIn.val($text)):"up"==a&&(0<b?(b--,$target=$results.eq(b),$text=$target.text(),$searchIn.val($text)):$target=$searchIn);$target.focus();console.log(b)}var $imgGalleryMain=$("#js-gallery-primary"),$imgGalleryFull=$("#js-gallery-thumbs"),$imgGalleryThumb=$imgGalleryFull.find("li");$imgGalleryPrev=$("#js-gallery-prev");
$imgGalleryNext=$("#js-gallery-next");$imgGalleryNum=$imgGalleryThumb.length-1;$imgGalleryThumb.click(function(){i=$(this).index();setMainImg(i)});
function setMainImg(a){$thumbImg=$imgGalleryThumb.eq(a).find("img");$getThumbSrc=$thumbImg.attr("src").replace("gallery-thumb","gallery").split("/").slice(-3).join("/");$fullThumbSrc="../"+$getThumbSrc;$imgGalleryMain.addClass("loading");1==$thumbImg.data("tile")?$imgGalleryMain.removeClass("loading").find("img").attr("src",fileSrc.site+"/"+$getThumbSrc):($.get(fileSrc.admin,{src:$fullThumbSrc,size:"tile",action:"jr_resize"},replaceMainImg),$thumbImg.data("tile",1))}
function replaceMainImg(a){$newSrc=$.parseJSON(a).replace("../",fileSrc.site+"/");$imgGalleryMain.removeClass("loading").find("img").attr("src",$newSrc)}$imgGalleryPrev.click(function(){0==$imgGalleryNum&&($imgGalleryNum=$imgGalleryThumb.length);$imgGalleryNum--;console.log($imgGalleryNum);setMainImg($imgGalleryNum)});$imgGalleryNext.click(function(){$imgGalleryNum==$imgGalleryThumb.length-1&&($imgGalleryNum=-1);$imgGalleryNum++;console.log($imgGalleryNum);setMainImg($imgGalleryNum)});
var $imgGalleryModal=$("#js-gallery-modal"),$imgGalleryOpen=$("#js-gallery-zoom"),$imgGalleryClose=$imgGalleryModal.find(".modal-close");$buyModal=$("#js-buy-modal");$buyModalOpen=$("#js-buy-btn");$buyModalClose=$buyModal.find(".modal-close");$queryModal=$("#js-query-modal");$queryModalOpen=$("#js-query-btn");$queryModalClose=$queryModal.find(".modal-close");function modalOpen(a){a.addClass("is-active")}function modalOpenSmall(a){a.addClass("is-active-small")}
function modalClose(a){a.removeClass("is-active");a.removeClass("is-active-small")}$imgGalleryOpen.click(function(){$getImgSrc=$imgGalleryMain.find("img").attr("src");$bigImgSrc=$getImgSrc.replace("gallery-tile","gallery");$imgGalleryModal.find("img").length?$imgGalleryModal.find("img").attr("src",$bigImgSrc):($bigImgNew='<img class="framed" src="'+$bigImgSrc+'" >',$imgGalleryModal.append($bigImgNew));modalOpen($imgGalleryModal)});$imgGalleryClose.click(function(){modalClose($imgGalleryModal)});$buyModalOpen.click(function(){modalOpenSmall($buyModal)});
$queryModalOpen.click(function(){modalOpenSmall($queryModal)});$buyModalClose.click(function(){modalClose($buyModal)});$queryModalClose.click(function(){modalClose($queryModal)});var $queryModalInput=$("#js-question-in").find("option"),$queryModaloutput=$("#js-question-out");$queryModalInput.click(function(){var a=$(this).val();$queryModaloutput.addClass("loading");$.get(fileSrc.admin,{keyword:a,action:"jr_getAnswers"}).done(questionToText)});
function questionToText(a){a=$.parseJSON(a);$queryModaloutput.removeClass("loading").html(a.answer).next("button").html(a.next)}var $form=$(".js_contact_form"),$formInputsReq=$form.find(".req"),$formInputsOptional=$form.find(":not(.req)"),$formNextBtn=$form.find(".js_nextBtn"),$formBackBtn=$form.find(".js_backBtn"),$formBlips=$form.next(".form-progress").find(".progress-blip"),formErrorList=[];$form.attr("novalidate","");
$form.submit(function(a){formErrorList=[];$thisForm=$(this);$response=$thisForm.find(".response");a.preventDefault();$thisForm.find($formInputsReq).each(function(){$el=$(this);formValidate($el)});$response.removeClass("success").removeClass("error").empty();0==formErrorList.length?($response.addClass("loading"),$.get(fileSrc.admin,{keyword:$thisForm.serialize(),action:"jr_formsubmit",url:window.location.href}).done(formAjaxReply)):$response.addClass("error").html("Please fill in required items")});
$formNextBtn.click(function(a){$thisSubForm=$(this).closest("fieldset.subform-active");$subFormIndex=$thisSubForm.index();formErrorList=[];$response=$thisSubForm.find(".response");$thisSubForm.find($formInputsReq).each(function(){$el=$(this);formValidate($el)});$response.removeClass("success").removeClass("error").empty();0==formErrorList.length?($thisSubForm.removeClass("subform-active").next("fieldset").addClass("subform-active"),$formBlips.eq($subFormIndex).addClass("active")):$response.addClass("error").html("Please fill in required items")});
$formBackBtn.click(function(a){$thisSubForm=$(this).closest("fieldset.subform-active");$thisSubForm.removeClass("subform-active").prev("fieldset").addClass("subform-active");$subFormIndex=$thisSubForm.index();$formBlips.eq($subFormIndex-1).removeClass("active")});$formInputsReq.change(function(a){$el=$(this);formValidate($el)});$formInputsOptional.change(function(a){$el=$(this);0<$el.val().length?$el.addClass("success"):$el.removeClass("success")});
function formValidate(a){var b=a.val(),g=a.attr("name"),l=a.attr("type"),f=b.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/),e="";$formInputsReq.index(a);a.removeClass("error").removeClass("success").next("span").empty();"email"!=l||f||(e="Please enter a valid email address",a.addClass("error"));1>b.length&&(e="Your "+g+" is required");0<e.length?(a.addClass("error").next("span").text(e),formErrorList.push(e)):
a.addClass("success")}function formAjaxReply(a){a=$.parseJSON(a);$resultOutcome="Form mailed successfully"==a?"success":"error";$form.find(".response").removeClass("loading").addClass($resultOutcome).html(a)}$itemTabFrame=$("#js-tabs-frame");$itemTabToggle=$itemTabFrame.find(".tab-toggle");$itemTabToggle.click(function(){$(this).closest("section").toggleClass("active").siblings("section").removeClass("active")});
